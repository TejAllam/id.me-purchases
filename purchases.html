<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID.me Purchases</title>

    <!-- Styles -->
    <style>

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #ecf0f1;
            --border-color: #000;
            --padding: 1rem;
            --gap: 1rem;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--secondary-color);
            color: var(--primary-color);
            padding: var(--padding);
        }

        .capitalize-first-letter {
            text-transform: capitalize;
        }

        .container {
            display: flex;
            flex-direction: column;
        }

        .item {
            border: 1px solid black;
            margin: 10px;
            padding: 10px;
        }

        /* Media query for desktop */
        @media (min-width: 768px) {
            .container {
                display: table;
                width: 100%;
            }

            .item {
                display: table-cell;
                border: 1px solid black;
                border-collapse: collapse;
                padding: 10px;
            }

            .card-header {
                display: flex;
                align-items: center;
            }

            .card-image {
                width: 50px;
                height: 50px;
                margin-right: 10px;
            }

            .card-title {
                margin: 0;
            }
        }
    </style>

    <!-- Functionality -->
    <script>
        // Fetch JSON Data from external source
        async function fetchData() {
            try {
                const purchaseData = await fetch('https://storage.googleapis.com/marketplace-prod-7728-shop-cdn-e5e2/interview/data.json');
                const data = await purchaseData.json();

                const container = document.getElementById('container');
                data.forEach(purchase => {
                    console.info(purchase);

                    // Write content to DOM 
                    const card = document.createElement('article');
                    card.classList.add('card');

                    const header = document.createElement('header');
                    header.classList.add('card-header');
                    const title = document.createElement('h2');
                    const price = document.createElement('p');

                    title.textContent = purchase.name;
                    title.classList.add('capitalize-first-letter');
                    price.textContent = purchase.price;

                    header.appendChild(title);
                    header.appendChild(price);
                    card.appendChild(header);

                    const image = document.createElement('img');
                    image.style.width = '60px';
                    image.style.height = '65px';
                    image.src = purchase.location;
                    image.alt = purchase.name;
                    header.prepend(image);

                    const contentDiv = document.createElement('div');
                    contentDiv.classList.add('content');
                    const paragraph = document.createElement('p');
                    paragraph.textContent = purchase.description;
                    contentDiv.appendChild(paragraph);
                    card.appendChild(contentDiv);

                    const footer = document.createElement('footer');

                    footer.textContent = purchase.purchaseDate;
                    card.appendChild(footer);

                    // Appending card to a container
                    const container = document.getElementById('container');
                    container.appendChild(card);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Initiate async call
        fetchData()
    </script>
</head>
<body>

    <header>
        <h1> Purchases </h1>
    </header>

    <main>
        <div id="container">

            <article class="card">
                <header>
                  <h2>Header Content</h2>
                </header>
            
                <img width="75px;" height="75px;"
                  src="https://picsum.photos/id/26/200"
                  alt="Alt Text" />
                <div class="content description">
                  <p>
                    We need to parse the mobile SMTP program!
                  </p>
                </div>
                <footer>
                    Price : $69734
                    purchaseDate: "2021-01-21T00:00:00.000Z"
                </footer>
              </article>

        </div>
    </main>

    <footer>
        
    </footer>
</body>
</html>